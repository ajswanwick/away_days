{% extends 'base.html' %}
{% block title%}Reviews{%endblock%}

{% block content %}
    <div class="container mt-4">
        <h1 class="mb-4">Review List</h1>

        <div class="mb-3 text-end">
            <a href="{% url 'review_create' %}" class=" review_btn btn btn-primary">Add Review</a>
        </div>
        {% if reviews %}
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                    <th>User</th>
                    <th>Team Visited</th>
                    <th>Visit Date</th>
                    <th>Final Score</th>
                    <th>Result</th>
                    <th>Location Rating</th>
                    <th>Atmosphere Rating</th>
                    <th>Facilities Rating</th>
                    <th>Catering Rating</th>
                    <th>Overall Rating</th>
                    <th>Comments</th>
                </tr>
            </thead>
            <tbody>
                {% for review in reviews %}
                    <tr>
                        <td>{{ review.user.username }}</td>
                        <td>{{ review.team_visited }}</td>
                        <td>{{ review.visit_date }}</td>
                        <td>{{ review.final_score }}</td>
                        <td>{{ review.get_result_display }}</td>
                        <td>{{ review.get_location_rating_display }}</td>
                        <td>{{ review.get_atmosphere_rating_display }}</td>
                        <td>{{ review.get_facilities_rating_display }}</td>
                        <td>{{ review.get_catering_rating_display }}</td>
                        <td>{{ review.get_overall_rating_display }}</td>
                        <td><div class="comment-box">
                            <span class="comment-preview">
                                {{ review.comments|slice:":100" }}{% if review.comments|length > 100 %}...{% endif %}
                            </span>
                            {% if review.comments|length > 100 %}
                                <span class="comment-full d-none">{{ review.comments }}</span>
                                <button class="btn btn-link btn-sm toggle-comment">Click for more</button>
                            {% endif %}
                        </div>
                    </td>
                   
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="11" class="text-center">No reviews available</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
    <p>No reviews found. Click "Add Review" to create your first review.</p>
    {% endif %}
    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

{% endblock content %}